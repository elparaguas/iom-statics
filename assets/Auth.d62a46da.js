import{n as E,g as S,o as c,c as w,a as e,r as h,u as q,b as A,m as f,d as y,e as k,f as u,w as v,h as x,t as z,i as Y,j as $,k as M,l as R,F as C,p as B,q as N,s as j,v as I,x as _,y as P,z as T}from"./index.54d776e9.js";import{_ as X}from"./BrForm.7f484318.js";import{_ as F}from"./BrAlert.786d7161.js";const U=.4,D="power4.out";function V(a,t){if(a.dataset.anim){const[s,r=U,n=0,d=D]=a.dataset.anim.split(";");t.push([a,s,r,n,d])}if(a.children)for(const s of a.children)V(s,t);return t}const L=a=>{switch(a){case"top":return{y:"-100%",opacity:0,filter:"blur(10px)"};case"bottom":return{y:"100%",opacity:0,filter:"blur(10px)"};case"right":return{x:"100%",opacity:0,filter:"blur(10px)"};case"left":return{x:"-100%",opacity:0,filter:"blur(10px)"};case"text":return{x:-50,opacity:0,delay:.5,stagger:.01,rotateX:70};default:return{opacity:0,scale:.4}}},O=async a=>{await E();const t=[];V(a.value,t);const s=S.timeline();for(let[r,n,d,m,o]of t)r=n=="text"?r.querySelectorAll("span"):r,s.from(r,{...L(n),ease:o,delay:m,duration:d})},W={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},H=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m11 5l-7 7l7 7m-7-7h16"},null,-1),G=[H];function J(a,t){return c(),w("svg",W,G)}var K={name:"akar-icons-arrow-left",render:J};const Q={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},tt=e("path",{fill:"currentColor",d:"M16 3c-3.035 0-5.586 1.965-6.625 4.625l1.844.75C11.977 6.434 13.836 5 16 5c2.754 0 5 2.246 5 5v1.375C19.523 10.515 17.824 10 16 10c-5.512 0-10 4.488-10 10s4.488 10 10 10s10-4.488 10-10a9.97 9.97 0 0 0-3-7.125V10c0-3.844-3.156-7-7-7zm0 9c4.43 0 8 3.57 8 8s-3.57 8-8 8s-8-3.57-8-8s3.57-8 8-8zm0 6a2 2 0 0 0-2 2c0 .738.402 1.371 1 1.719V25h2v-3.281c.598-.348 1-.98 1-1.719a2 2 0 0 0-2-2z"},null,-1),et=[tt];function at(a,t){return c(),w("svg",Q,et)}var rt={name:"la-unlock-alt",render:at};const ot={width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"},st=e("path",{fill:"currentColor",d:"M16.188 4C8.823 3.89 2.914 10.484 4.155 18.031C5 23.152 9.203 27.18 14.344 27.875c3.465.469 6.703-.531 9.156-2.5l-1.25-1.563c-2.047 1.641-4.738 2.489-7.656 2.094c-4.254-.574-7.742-3.953-8.438-8.187C5.11 11.348 9.992 5.91 16.156 6c5.254.078 9.684 4.434 9.844 9.688c.004.113 0 .222 0 .343A3.984 3.984 0 0 1 22 20c-1.117 0-2-.883-2-2v-8h-2v.781A4.43 4.43 0 0 0 15.5 10a4.516 4.516 0 0 0-4.5 4.5v3c0 2.473 2.027 4.5 4.5 4.5c1.348 0 2.547-.613 3.375-1.563C19.609 21.372 20.73 22 22 22c3.285 0 5.988-2.68 6-5.969c0-.133.004-.261 0-.406C27.809 9.289 22.523 4.094 16.187 4zm-.688 8c1.39 0 2.5 1.11 2.5 2.5v3c0 1.39-1.11 2.5-2.5 2.5S13 18.89 13 17.5v-3c0-1.39 1.11-2.5 2.5-2.5z"},null,-1),nt=[st];function it(a,t){return c(),w("svg",ot,nt)}var Z={name:"la-at",render:it};const lt=e("article",{class:"welcome","data-anim":"bottom;.5;-.5"},[e("div",null,"Sign in"),e("p",null," Please enter the details below to access your account. ")],-1),ct={key:0,class:"!w-full bg-danger-50"},mt={class:"auth-form","data-anim":"bottom;.5;-.3"},wt={__name:"Login",props:["requestedview"],emits:["update:requestedview"],setup(a,{emit:t}){const s=h(null);q();const r=A({}),n={form:{type:"stacked-int",save:"perForm"},fields:[{name:"email",label:"Email address",type:"email",beforeIcon:f(Z),parentClasses:"br-span-full",rules:y().email().required(),placeholder:"Enter your email"},{name:"password",rules:y().required(),beforeIcon:f(rt),parentClasses:"br-span-full",placeholder:"\u2022\u2022\u2022",type:"password",label:"Password"}]},d=({values:o,errors:i,results:l,notify:p})=>{},m=async(o,{setErrors:i,notify:l})=>{const p=await R(o.email,o.password),{status:g}=p;if(g>=400){i({email:" ",password:" "}),g===403&&(s.value="These credentials don't match our records.");return}g===200&&window.location.reload()};return(o,i)=>{const l=F,p=k("br-transition"),g=X;return c(),w("section",null,[lt,u(p,{name:"dissolve"},{default:v(()=>[s.value?(c(),w("div",ct,[u(l,{class:"text-xs !w-content !mx-auto",show:!0,level:"danger"},{default:v(()=>[x(z(s.value),1)]),_:1})])):Y("",!0)]),_:1}),e("article",mt,[u(g,$({name:"login",modelValue:r,"onUpdate:modelValue":i[1]||(i[1]=b=>M(r)?r.value=b:null)},{schema:n,onFormErrors:d,onFormValid:m},{"submit-text":"Sign in","submitting-text":"Signing in..."}),{"after-fields":v(()=>[e("div",{class:"br-link br-primary iom-login--after-fields",onClick:i[0]||(i[0]=b=>t("update:requestedview","forgot"))},"Forgot password")]),_:1},16,["modelValue"])])])}}},dt=e("article",{class:"welcome","data-anim":"bottom;.5;-.5"},[e("div",null,"Forgot password?"),e("p",null," No worries. It happens. Please enter below the email address associated with your account. ")],-1),pt={class:"auth-form","data-anim":"bottom;.5;-.3"},ut={key:1,class:"auth-result"},vt=x(" Now check your inbox. "),gt=x(" We have sent you a link to reset your password. "),ht={__name:"ForgotPass",setup(a){const t=h(!1),s=h({}),r={form:{type:"stacked",save:"perForm"},fields:[{name:"email",label:"Email address",type:"email",beforeIcon:f(Z),parentClasses:"br-span-full",rules:y().email().required(),placeholder:"Enter your email"}]},n=({values:m,errors:o,results:i,notify:l})=>{},d=async(m,{setErrors:o,notify:i})=>{t.value=!0};return(m,o)=>{const i=X,l=F;return c(),w("section",null,[t.value?(c(),w("section",ut,[u(l,{show:t.value,"onUpdate:show":o[1]||(o[1]=p=>t.value=p),level:"info"},{desc:v(()=>[gt]),default:v(()=>[vt]),_:1},8,["show"])])):(c(),w(C,{key:0},[dt,e("article",pt,[u(i,$({modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=p=>s.value=p),name:"forgot"},{schema:r,onFormErrors:n,onFormValid:d},{class:"!bg-transparent !h-full","submit-text":"Reset password","submitting-text":"Resetting..."}),null,16,["modelValue"])])],64))])}}};const ft={class:"w-full pb-3 origin-top lg:col-start-1 lg:pt-[25vh] relative bg-blend-darken","data-anim":"top;0.9;power4.in"},yt=e("div",{class:"iom-logo"},null,-1),xt=e("div",{class:"lg:relative lg:w-[5vw] lg:h-1.5 lg:bg-white lg:mx-auto lg:mt-12 lg:mb-8","data-anim":"left;0.4;-0.4;power4.in"},null,-1),bt={"data-anim":"text;.3;-.4;power4.out"},Yt={__name:"Auth",setup(a){const t={login:wt,forgot:ht};B();const s=N(()=>t[n.value]),r=h(null),n=h("login");return j(()=>{O(r)}),(d,m)=>{const o=K,i=k("br-transition");return c(),w("section",{ref_key:"form",ref:r,class:"iom-auth-form w-full bg-blue-gray-100 text-dark-700 h-screen lg:grid lg:grid-cols-2"},[e("header",ft,[u(i,{name:"dissolve",delay:.5},{default:v(()=>[n.value!=="login"?(c(),_(o,{key:0,class:"br-link go-back",onClick:m[0]||(m[0]=l=>n.value="login")})):Y("",!0)]),_:1},8,["delay"]),yt,xt,e("p",bt,[(c(),w(C,null,I("Field Survey Platform",l=>e("span",{key:l},z(l),1)),64))])]),u(i,{name:"horizontalBlurRight"},{default:v(()=>[(c(),_(P(T(s)),{requestedview:n.value,"onUpdate:requestedview":m[1]||(m[1]=l=>n.value=l)},null,40,["requestedview"]))]),_:1})],512)}}};export{Yt as default};
